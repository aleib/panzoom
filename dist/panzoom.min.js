/**
* Panzoom for panning and zooming elements using CSS transforms
* Copyright Timmy Willison and other contributors
* https://github.com/timmywil/panzoom/blob/main/MIT-License.txt
*/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Panzoom=e()}(this,function(){"use strict";var C=function(){return(C=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};"undefined"!=typeof window&&(window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),"function"!=typeof window.CustomEvent&&(window.CustomEvent=function(t,e){e=e||{bubbles:!1,cancelable:!1,detail:null};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}));var a,i="undefined"!=typeof document&&!!document.documentMode;var l=["webkit","moz","ms"],p={};function T(t){if(p[t])return p[t];var e=a=a||document.createElement("div").style;if(t in e)return p[t]=t;for(var n=t[0].toUpperCase()+t.slice(1),o=l.length;o--;){var r=""+l[o]+n;if(r in e)return p[t]=r}}function r(t,e){return parseFloat(e[T(t)])||0}function c(t,e,n){var o="border"===e?"Width":"";return{left:r(e+"Left"+o,n=void 0===n?window.getComputedStyle(t):n),right:r(e+"Right"+o,n),top:r(e+"Top"+o,n),bottom:r(e+"Bottom"+o,n)}}function R(t,e,n){t.style[T(e)]=n}function N(t){var e=t.parentNode,n=window.getComputedStyle(t),o=window.getComputedStyle(e),r=t.getBoundingClientRect(),a=e.getBoundingClientRect();return{elem:{style:n,width:r.width,height:r.height,top:r.top,bottom:r.bottom,left:r.left,right:r.right,margin:c(t,"margin",n),border:c(t,"border",n)},parent:{style:o,width:a.width,height:a.height,top:a.top,bottom:a.bottom,left:a.left,right:a.right,padding:c(e,"padding",o),border:c(e,"border",o)}}}var L={down:"mousedown",move:"mousemove",up:"mouseup mouseleave"};function V(t,e,n,o){L[t].split(" ").forEach(function(t){e.addEventListener(t,n,o)})}function G(t,e,n){L[t].split(" ").forEach(function(t){e.removeEventListener(t,n)})}"undefined"!=typeof window&&("function"==typeof window.PointerEvent?L={down:"pointerdown",move:"pointermove",up:"pointerup pointerleave pointercancel"}:"function"==typeof window.TouchEvent&&(L={down:"touchstart",move:"touchmove",up:"touchend touchcancel"}));var I=/^http:[\w\.\/]+svg$/;function W(t,e){for(var n=t.length;n--;)if(t[n].pointerId===e.pointerId)return n;return-1}function Z(t,e){if(e.touches)for(var n=0,o=0,r=e.touches;o<r.length;o++){var a=r[o];a.pointerId=n++,Z(t,a)}else-1<(n=W(t,e))&&t.splice(n,1),t.push(e)}function q(t){for(var e,n=(t=t.slice(0)).pop();e=t.pop();)n={clientX:(e.clientX-n.clientX)/2+n.clientX,clientY:(e.clientY-n.clientY)/2+n.clientY};return n}function B(t){if(t.length<2)return 0;var e=t[0],t=t[1];return Math.sqrt(Math.pow(Math.abs(t.clientX-e.clientX),2)+Math.pow(Math.abs(t.clientY-e.clientY),2))}var D={animate:!1,canvas:!1,cursor:"move",disablePan:!1,disableZoom:!1,disableXAxis:!1,disableYAxis:!1,duration:200,easing:"ease-in-out",exclude:[],excludeClass:"panzoom-exclude",handleStartEvent:function(t){t.preventDefault(),t.stopPropagation()},maxScale:4,minScale:.125,overflow:"hidden",panOnlyWhenZoomed:!1,relative:!1,setTransform:function(t,e,n){var o=e.x,r=e.y,a=e.scale,e=e.isSVG;R(t,"transform","scale("+a+") translate("+o+"px, "+r+"px)"),e&&i&&(e=window.getComputedStyle(t).getPropertyValue("transform"),t.setAttribute("transform",e))},startX:0,startY:0,startScale:1,step:.3,touchAction:"none"};function t(h,v){if(!h)throw new Error("Panzoom requires an element as an argument");if(1!==h.nodeType)throw new Error("Panzoom requires an element with a nodeType of 1");if(t=(e=h).ownerDocument,e=e.parentNode,!(t&&e&&9===t.nodeType&&1===e.nodeType&&t.documentElement.contains(e)))throw new Error("Panzoom should be called on elements that have been attached to the DOM");var t;v=C(C({},D),v);var e,p=(e=h,I.test(e.namespaceURI)&&"svg"!==e.nodeName.toLowerCase()),n=h.parentNode;n.style.overflow=v.overflow,n.style.userSelect="none",n.style.touchAction=v.touchAction,(v.canvas?n:h).style.cursor=v.cursor,h.style.userSelect="none",h.style.touchAction=v.touchAction,R(h,"transformOrigin","string"==typeof v.origin?v.origin:p?"0 0":"50% 50%");var o,r,a,i,l,c,g=0,y=0,w=1,s=!1;function d(t,e,n){n.silent||(e=new CustomEvent(t,{detail:e}),h.dispatchEvent(e))}function u(e,n,t){var o={x:g,y:y,scale:w,isSVG:p,originalEvent:t};return requestAnimationFrame(function(){var t;"boolean"==typeof n.animate&&(n.animate?(t=n,R(h,"transition",T("transform")+" "+t.duration+"ms "+t.easing)):R(h,"transition","none")),n.setTransform(h,o,n),d(e,o,n),d("panzoomchange",o,n)}),o}function m(){var t,e,n;v.contain&&(e=(n=N(h)).parent.width-n.parent.border.left-n.parent.border.right,t=n.parent.height-n.parent.border.top-n.parent.border.bottom,e=e/(n.elem.width/w),n=t/(n.elem.height/w),"inside"===v.contain?v.maxScale=Math.min(e,n):"outside"===v.contain&&(v.minScale=Math.max(e,n)))}function f(t,e,n,o){var r,a,i,l,p,c,s,d,u,m=C(C({},v),o),f={x:g,y:y,opts:m};return!m.force&&(m.disablePan||m.panOnlyWhenZoomed&&w===m.startScale)||(t=parseFloat(t),e=parseFloat(e),m.disableXAxis||(f.x=(m.relative?g:0)+t),m.disableYAxis||(f.y=(m.relative?y:0)+e),(m.contain||m.maxPanRatio)&&(i=((a=(p=(r=N(h)).elem.width/w)*n)-p)/2,t=((o=(l=r.elem.height/w)*n)-l)/2,"inside"===m.contain?(c=(-r.elem.margin.left-r.parent.padding.left+i)/n,s=(r.parent.width-a-r.parent.padding.left-r.elem.margin.left-r.parent.border.left-r.parent.border.right+i)/n,f.x=Math.max(Math.min(f.x,s),c),d=(-r.elem.margin.top-r.parent.padding.top+t)/n,u=(r.parent.height-o-r.parent.padding.top-r.elem.margin.top-r.parent.border.top-r.parent.border.bottom+t)/n,f.y=Math.max(Math.min(f.y,u),d)):"outside"===m.contain?(c=(-(a-r.parent.width)-r.parent.padding.left-r.parent.border.left-r.parent.border.right+i)/n,s=(i-r.parent.padding.left)/n,f.x=Math.max(Math.min(f.x,s),c),d=(-(o-r.parent.height)-r.parent.padding.top-r.parent.border.top-r.parent.border.bottom+t)/n,u=(t-r.parent.padding.top)/n,f.y=Math.max(Math.min(f.y,u),d)):m.maxPanRatio&&(e=r.elem,p=r.parent,l=(e.height<p.height?e:p).height,p=(e.width<p.width?e:p).width,c=(i-r.elem.margin.left-r.parent.padding.left-a+p*(1-m.maxPanRatio))/n,s=(r.parent.width-r.parent.padding.left-r.elem.margin.left-r.parent.border.left-r.parent.border.right+i+-p*(1-m.maxPanRatio))/n,f.x=Math.max(Math.min(f.x,s),c),d=(t-r.elem.margin.top-r.parent.padding.top-o+l*(1-m.maxPanRatio))/n,u=(r.parent.height-r.parent.padding.top-r.parent.border.top-r.parent.border.bottom-r.elem.margin.top+t-l*(1-m.maxPanRatio))/n,f.y=Math.max(Math.min(f.y,u),d)))),f}function b(t,e){var n=C(C({},v),e),e={scale:w,opts:n};return!n.force&&n.disableZoom||(e.scale=Math.min(Math.max(t,n.minScale),n.maxScale)),e}function x(t,e,n,o){n=f(t,e,w,n);return g!==n.x||y!==n.y?(g=n.x,y=n.y,u("panzoompan",n.opts,o)):{x:g,y:y,scale:w,isSVG:p,originalEvent:o}}function S(t,e,n){var o=b(t,e),r=o.opts;if(r.force||!r.disableZoom){t=o.scale;var a=g,e=y;r.focal&&(a=((o=r.focal).x/t-o.x/w+g*t)/t,e=(o.y/t-o.y/w+y*t)/t);e=f(a,e,t,{relative:!1,force:!0});return g=e.x,y=e.y,w=t,u("panzoomzoom",r,n)}}function E(t,e){e=C(C(C({},v),{animate:!0}),e);return S(w*Math.exp((t?1:-1)*e.step),e)}function P(t,e,n,o){var r=N(h),a=r.parent.width-r.parent.padding.left-r.parent.padding.right-r.parent.border.left-r.parent.border.right,i=r.parent.height-r.parent.padding.top-r.parent.padding.bottom-r.parent.border.top-r.parent.border.bottom,l=e.clientX-r.parent.left-r.parent.padding.left-r.parent.border.left-r.elem.margin.left,e=e.clientY-r.parent.top-r.parent.padding.top-r.parent.border.top-r.elem.margin.top;p||(l-=r.elem.width/w/2,e-=r.elem.height/w/2);i={x:l/a*(a*t),y:e/i*(i*t)};return S(t,C(C({animate:!1},n),{focal:i}),o)}S(v.startScale,{animate:!1,force:!0}),setTimeout(function(){m(),x(v.startX,v.startY,{animate:!1,force:!0})});var M=[];function O(t){!function(t,e){for(var n,o,r=t;null!=r;r=r.parentNode)if(n=r,o=e.excludeClass,1===n.nodeType&&-1<(" "+(n.getAttribute("class")||"").trim()+" ").indexOf(" "+o+" ")||-1<e.exclude.indexOf(r))return 1}(t.target,v)&&(Z(M,t),s=!0,v.handleStartEvent(t),d("panzoomstart",{x:o=g,y:r=y,scale:w,isSVG:p,originalEvent:t},v),t=q(M),a=t.clientX,i=t.clientY,l=w,c=B(M))}function A(t){var e;s&&void 0!==o&&void 0!==r&&void 0!==a&&void 0!==i&&(Z(M,t),e=q(M),1<M.length?(0===c&&(c=B(M)),P(b((B(M)-c)*v.step/80+l).scale,e)):x(o+(e.clientX-a)/w,r+(e.clientY-i)/w,{animate:!1},t))}function z(t){1===M.length&&d("panzoomend",{x:g,y:y,scale:w,isSVG:p,originalEvent:t},v),function(t,e){if(e.touches)for(;t.length;)t.pop();else{e=W(t,e);-1<e&&t.splice(e,1)}}(M,t),s&&(s=!1,o=r=a=i=void 0)}var X=!1;function Y(){X||(X=!0,V("down",v.canvas?n:h,O),V("move",document,A,{passive:!0}),V("up",document,z,{passive:!0}))}return v.noBind||Y(),{bind:Y,destroy:function(){X=!1,G("down",v.canvas?n:h,O),G("move",document,A),G("up",document,z)},eventNames:L,getPan:function(){return{x:g,y:y}},getScale:function(){return w},getOptions:function(){return function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(v)},pan:x,reset:function(t){var e=C(C(C({},v),{animate:!0,force:!0}),t);return w=b(e.startScale,e).scale,t=f(e.startX,e.startY,w,e),g=t.x,y=t.y,u("panzoomreset",e)},resetStyle:function(){n.style.overflow="",n.style.userSelect="",n.style.touchAction="",n.style.cursor="",h.style.cursor="",h.style.userSelect="",h.style.touchAction="",R(h,"transformOrigin","")},setOptions:function(t){for(var e in t=void 0===t?{}:t)t.hasOwnProperty(e)&&(v[e]=t[e]);(t.hasOwnProperty("cursor")||t.hasOwnProperty("canvas"))&&(n.style.cursor=h.style.cursor="",(v.canvas?n:h).style.cursor=v.cursor),t.hasOwnProperty("overflow")&&(n.style.overflow=t.overflow),t.hasOwnProperty("touchAction")&&(n.style.touchAction=t.touchAction,h.style.touchAction=t.touchAction),(t.hasOwnProperty("minScale")||t.hasOwnProperty("maxScale")||t.hasOwnProperty("contain"))&&m()},setStyle:function(t,e){return R(h,t,e)},zoom:S,zoomIn:function(t){return E(!0,t)},zoomOut:function(t){return E(!1,t)},zoomToPoint:P,zoomWithWheel:function(t,e){t.preventDefault();var n=C(C(C({},v),e),{animate:!1}),e=0===t.deltaY&&t.deltaX?t.deltaX:t.deltaY;return P(b(w*Math.exp((e<0?1:-1)*n.step/3),n).scale,t,n)}}}return t.defaultOptions=D,t});